(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6685"],{"992a":function(t,o,a){"use strict";a.r(o);var e=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",[a("h3",{staticClass:"admin-title"},[t._v("優惠券列表")]),a("div",{staticClass:"text-right mb-3 mr-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(o){return t.openAdminCouponsModal()}}},[t._v("建立新的優惠券")])]),a("div",{staticClass:"table-responsive mb-3"},[a("table",{staticClass:"table text-center"},[t._m(0),a("tbody",t._l(t.adminCoupons,(function(o){return a("tr",{key:o.id},[a("td",[t._v(t._s(o.title))]),a("td",[t._v(t._s(o.percent)+"%")]),a("td",[t._v(t._s(t._f("displayDate")(o.due_date)))]),a("td",{staticClass:"admincoupons-code"},[t._v(t._s(o.code))]),a("td",[1===o.is_enabled?a("span",{staticClass:"text-secondary"},[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.openAdminCouponsModal(o)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.openDelModal(o)}}},[t._v("刪除")])])])})),0)])]),a("pagination",{staticClass:"ml-3",attrs:{pagination:t.pagination},on:{"click-page":t.getAdminCoupons}}),a("div",{staticClass:"modal fade",attrs:{id:"adminCouponsModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{id:"adminCouponsModalDialog",role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-primary text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.addition?a("span",[t._v("新增優惠券")]):a("span",[t._v("編輯優惠券")])]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"adminCouponTitle"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"adminCouponTitle",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"title",o.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"adminCouponPercent"}},[t._v("折扣百分比（1-3 位數字）")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"adminCouponPercent",placeholder:"不需輸入百分比符號"},domProps:{value:t.tempCoupon.percent},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"percent",o.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",[t._v("到期日（+0800 台北時間）")]),a("input",{staticClass:"form-control",attrs:{type:"date",id:"cdd",placeholder:"請輸入到期日"},domProps:{value:t._f("displayDate")(t.tempCoupon.due_date)},on:{change:t.pickDate}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"adminCouponCode"}},[t._v("使用代碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"adminCouponCode",placeholder:"請輸入使用代碼"},domProps:{value:t.tempCoupon.code},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"code",o.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group col"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"adminCouponIsEnabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(o){var a=t.tempCoupon.is_enabled,e=o.target,n=e.checked?1:0;if(Array.isArray(a)){var s=null,i=t._i(a,s);e.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([s])):i>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",n)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"adminCouponIsEnabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-black",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.uploadCoupon}},[t._v("確認")])])])])])],1)},n=[function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("thead",[a("tr",[a("th",{staticClass:"admin-name"},[t._v("優惠券名稱")]),a("th",{staticClass:"admincoupons-discount"},[t._v("折扣百分比")]),a("th",{staticClass:"admin-date"},[t._v("到期日")]),a("th",{staticClass:"admincoupons-code"},[t._v("優惠碼")]),a("th",{staticClass:"admin-enabled"},[t._v("是否啟用")]),a("th",{staticClass:"admin-edition"},[t._v("編輯")])])])},function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],s=a("5530"),i=(a("99af"),{data:function(){return{tempCoupon:{},addition:!1}},computed:{adminCoupons:function(){return this.$store.state.adminModule.adminCoupons},pagination:function(){return this.$store.state.adminModule.pagination}},created:function(){this.getAdminCoupons(),this.$store.commit("SET_ADMINACTIVE","AdminCoupons")},methods:{getAdminCoupons:function(t){this.$store.dispatch("getAdminCoupons",t)},openAdminCouponsModal:function(t){t?(this.tempCoupon=Object(s["a"])({},t),this.addition=!1):(this.tempCoupon={},this.addition=!0),$("#adminCouponsModal").modal("show")},pickDate:function(){var t=flatpickr("#cdd",{});this.tempCoupon.due_date=Date.parse(t.selectedDates[0])/1e3},uploadCoupon:function(){var t=this;if(t.addition){var o="".concat("https://vue-course-api.hexschool.io","/api/").concat("zou06","/admin/coupon");t.axios.post(o,{data:t.tempCoupon}).then((function(o){o.data.success&&($("#adminCouponsModal").modal("hide"),t.getAdminCoupons())}))}else{var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("zou06","/admin/coupon/").concat(t.tempCoupon.id);t.axios.put(a,{data:t.tempCoupon}).then((function(o){o.data.success&&($("#adminCouponsModal").modal("hide"),t.getAdminCoupons())}))}},openDelModal:function(t){this.$store.commit("SET_MSG",{event:"delAdminCoupon",object:t.title,objectId:t.id})}}}),d=i,l=a("2877"),c=Object(l["a"])(d,e,n,!1,null,null,null);o["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0e6685.5e6f342a.js.map