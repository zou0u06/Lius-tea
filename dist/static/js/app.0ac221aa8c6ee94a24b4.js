webpackJsonp([1],{"/tRK":function(t,e){},"2Wx6":function(t,e){},"2hHT":function(t,e){},AiV2:function(t,e){},"Foe+":function(t,e){},HNKp:function(t,e){},Ixbe:function(t,e){},JN9a:function(t,e){},MKE8:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("fZjL"),i=s.n(a),r=s("7+uW"),o=s("mtWM"),n=s.n(o),c=s("Rf8U"),d=s.n(c),l=s("NYxO"),u=(s("K3J8"),s("7t+N")),v=s.n(u),m=(s("GxBP"),s("ksQV"),s("ZZvs")),p=s.n(m),_=(s("SYh3"),s("sUu7")),f=s("SjS3"),C=s.n(f),h=s("wGWZ"),g={data:function(){return{title:"",theme:"",action:""}},methods:{dismissWithTiming:function(){setTimeout(function(){$("#msgModel").modal("hide")},5e3)},goToCusCart:function(){$("#msgModel").modal("hide"),this.$router.push("/cart")},delObject:function(t){var e=this,s=void 0,a=void 0;switch(this.msg.event){default:s="cart",a="getCusCart";break;case"delAdminProduct":s="admin/product",a="getAdminProducts";break;case"delAdminCoupon":s="admin/coupon",a="getAdminCoupons"}var i="https://vue-course-api.hexschool.io/api/zou06/"+s+"/"+t;e.axios.delete(i).then(function(t){t.data.success&&(e.$store.dispatch(a),$("#msgModel").modal("hide"))})}},watch:{msg:{handler:function(){switch(this.msg.event){default:this.title="確認刪除",this.theme="danger",this.action="確認要刪除以上商品／折價券？",$("#msgModel").modal("show");break;case"showingCoupon":this.title="最新優惠",this.theme="secondary",this.action="",$("#msgModel").modal("show");break;case"wrongServer":this.title="伺服器錯誤",this.theme="danger",this.action="網站伺服器錯誤，請直接來電洽詢，將有專人為您服務",$("#msgModel").modal("show"),this.dismissWithTiming();break;case"addedToCusCart":this.title="商品已加入購物車",this.theme="secondary",this.action="已加入您的購物車",$("#msgModel").modal("show"),this.dismissWithTiming()}},deep:!0}},computed:{msg:function(){return this.$store.state.msg}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade",attrs:{id:"msgModel","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{id:"modalDialog"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header d-flex",class:"bg-"+t.theme},[s("h5",{staticClass:"modal-title text-white",attrs:{id:"staticBackdropLabel"}},[t._v(t._s(t.title))]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"modal-body"},[t.msg.object?s("h6",{staticClass:"mb-3",class:"text-"+t.theme},[t._v("\n          "+t._s(t.msg.object))]):t._e(),t._v(" "),""!==t.action?s("h6",[t._v(t._s(t.action))]):s("div",{staticClass:"text-center"},[s("h6",{staticClass:"mb-3"},[t._v("為慶祝本茶行開幕九周年")]),t._v(" "),s("h6",{staticClass:"line_height_large"},[t._v("只要在結帳時輸入\n            "),s("span",{class:"text-"+t.theme},[t._v(" ninety ")]),t._v("\n            優惠碼即可取得九折優惠！\n          ")])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button","data-dismiss":"modal"}},[t._v("關閉")]),t._v(" "),"addedToCusCart"===t.msg.event?s("button",{staticClass:"btn",class:"btn-"+t.theme,attrs:{type:"button"},on:{click:function(e){return t.goToCusCart()}}},[t._v("查看購物車")]):t._e(),t._v(" "),"delCusCart"===t.msg.event||"delAdminProduct"===t.msg.event||"delAdminCoupon"===t.msg.event?s("button",{staticClass:"btn",class:"btn-"+t.theme,attrs:{type:"button"},on:{click:function(e){return t.delObject(t.msg.objectId)}}},[t._v("確認刪除")]):t._e()])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close line_height_large",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var x={name:"App",components:{msgModal:s("VU/8")(g,b,!1,function(t){s("ju2U")},null,null).exports},data:function(){return{scrollY:0}},computed:{loading:function(){return this.$store.state.loading}},methods:{getScrollY:function(){window.addEventListener("scroll",function(){window.scrollY>400?document.querySelector(".totop").style.display="inline":document.querySelector(".totop").style.display="none"})},goToTop:function(){var t=-window.scrollY/200,e=setInterval(function(){0!==window.scrollY?window.scrollBy(0,t):clearInterval(e)},5)}},created:function(){this.getScrollY()}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("msg-modal"),t._v(" "),s("loading",{attrs:{active:t.loading},on:{"update:active":function(e){t.loading=e}}}),t._v(" "),s("router-view"),t._v(" "),s("button",{staticClass:"totop button btn-extra",on:{click:function(e){return t.goToTop()}}},[s("i",{staticClass:"fas fa-arrow-up"})])],1)},staticRenderFns:[]};var P=s("VU/8")(x,y,!1,function(t){s("a+6V")},null,null).exports,k=s("/ocq"),w={data:function(){return{}},methods:{setAdminNavbar:function(){document.body.clientWidth<768&&document.querySelector(".adminnavbar_toggler").click()},signout:function(){var t=this;this.axios.post("https://vue-course-api.hexschool.io/logout").then(function(e){!0===e.data.success&&t.$router.push("/login")})}},computed:{adminActive:function(){return this.$store.state.adminModule.adminActive}}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-primary"},[s("div",{staticClass:"container-xl px-0 px-xl-3"},[s("h2",{staticClass:"mr-auto text-white"},[t._v("劉記茗茶管理後臺")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse adminnavbar_collapse"},[s("ul",{staticClass:"navbar-nav ml-auto text-center",on:{click:function(e){return e.preventDefault(),t.setAdminNavbar()}}},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"adminProducts"===t.adminActive},attrs:{to:"/admin"}},[t._v("產品列表")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"adminOrders"===t.adminActive},attrs:{to:"/admin/orders"}},[t._v("訂單列表")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"adminCoupons"===t.adminActive},attrs:{to:"/admin/coupons"}},[t._v("優惠券列表")])],1),t._v(" "),s("li",{staticClass:"nav-item",on:{click:function(e){return e.preventDefault(),t.signout(e)}}},[s("a",{staticClass:"nav-link"},[t._v("登出")])])])])])]),t._v(" "),s("div",{staticClass:"collapse adminnavbar_collapse mask adminnavbar_mask"})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler adminnavbar_toggler border-0",attrs:{type:"button","data-toggle":"collapse","data-target":".adminnavbar_collapse","aria-controls":"adminnavbar_collapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var S={components:{adminNavbar:s("VU/8")(w,E,!1,function(t){s("RPYi")},null,null).exports},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=t}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("admin-navbar"),this._v(" "),e("main",{staticClass:"container-xl admin px-0 px-md-3"},[e("router-view")],1)],1)},staticRenderFns:[]};var N=s("VU/8")(S,T,!1,function(t){s("w2nM")},null,null).exports,A=s("Dd8w"),I=s.n(A),M={props:{pagination:{type:Object}},methods:{changePage:function(t){this.$emit("click-page",t)}}},O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item rounded-left",class:{disabled:!t.pagination.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[t._v("上一頁")])]),t._v(" "),t._l(t.pagination.total_pages,function(e){return s("li",{key:e,staticClass:"page-item",class:{active:e===t.pagination.current_page}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.changePage(e)}}},[t._v(t._s(e))])])}),t._v(" "),s("li",{staticClass:"page-item rounded-right",class:{disabled:!t.pagination.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[t._v("下一頁")])])],2)])},staticRenderFns:[]};var F=s("VU/8")(M,O,!1,function(t){s("aMDT")},null,null).exports,U={components:{pagination:F},data:function(){return{tempCoupon:{},addition:!1}},methods:{getAdminCoupons:function(t){this.$store.dispatch("getAdminCoupons",t)},openCouponModal:function(t){t?(this.tempCoupon=I()({},t),this.addition=!1):(this.tempCoupon={},this.addition=!0),$("#couponModal").modal("show")},pickDate:function(){var t=flatpickr("#cdd",{});this.tempCoupon.due_date=Date.parse(t.selectedDates[0])/1e3},uploadCoupon:function(){var t=this;if(t.addition){t.axios.post("https://vue-course-api.hexschool.io/api/zou06/admin/coupon",{data:t.tempCoupon}).then(function(e){e.data.success&&($("#couponModal").modal("hide"),t.getAdminCoupons())})}else{var e="https://vue-course-api.hexschool.io/api/zou06/admin/coupon/"+t.tempCoupon.id;t.axios.put(e,{data:t.tempCoupon}).then(function(e){e.data.success&&($("#couponModal").modal("hide"),t.getAdminCoupons())})}},openDelCModal:function(t){this.$store.commit("SET_MSG",{event:"delAdminCoupon",object:t.title,objectId:t.id})}},computed:{adminCoupons:function(){return this.$store.state.adminModule.adminCoupons},pagination:function(){return this.$store.state.adminModule.pagination}},created:function(){this.getAdminCoupons(),this.$store.commit("SET_ADMINACTIVE","adminCoupons")}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",{staticClass:"admin_title"},[t._v("優惠券列表")]),t._v(" "),s("div",{staticClass:"text-right mb-3 mr-3"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openCouponModal()}}},[t._v("建立新的優惠券")])]),t._v(" "),s("div",{staticClass:"table-responsive mb-3"},[s("table",{staticClass:"table text-center"},[t._m(0),t._v(" "),s("tbody",t._l(t.adminCoupons,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.title))]),t._v(" "),s("td",[t._v(t._s(e.percent)+"%")]),t._v(" "),s("td",[t._v(t._s(t.$displayDate(e.due_date)))]),t._v(" "),s("td",[t._v(t._s(e.code))]),t._v(" "),s("td",[1===e.is_enabled?s("span",{staticClass:"text-success"},[t._v("啟用")]):s("span",[t._v("未啟用")])]),t._v(" "),s("td",[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(s){return t.openCouponModal(e)}}},[t._v("編輯")]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(s){return t.openDelCModal(e)}}},[t._v("刪除")])])])}),0)])]),t._v(" "),s("pagination",{staticClass:"ml-3",attrs:{pagination:t.pagination},on:{"click-page":t.getAdminCoupons}}),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"couponModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-primary text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.addition?s("span",[t._v("新增優惠券")]):s("span",[t._v("編輯優惠券")])]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",[t._v("到期日")]),t._v(" "),s("input",{staticClass:"form-control",attrs:{id:"cdd",placeholder:"請輸入到期日"},domProps:{value:t.$displayDate(t.tempCoupon.due_date)},on:{focus:t.pickDate}})]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"code"}},[t._v("使用代碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入使用代碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var s=t.tempCoupon.is_enabled,a=e.target,i=a.checked?1:0;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&t.$set(t.tempCoupon,"is_enabled",s.concat([null])):r>-1&&t.$set(t.tempCoupon,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-black",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.uploadCoupon}},[t._v("確認")])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"admin_name"},[t._v("優惠券名稱")]),t._v(" "),s("th",{staticClass:"admincoupons_discount"},[t._v("折扣百分比")]),t._v(" "),s("th",{staticClass:"admin_date"},[t._v("到期日")]),t._v(" "),s("th",{staticClass:"admincoupons_code"},[t._v("使用代碼")]),t._v(" "),s("th",{staticClass:"admin_enabled"},[t._v("是否啟用")]),t._v(" "),s("th",{staticClass:"admin_edition"},[t._v("編輯")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var D=s("VU/8")(U,j,!1,function(t){s("AiV2")},null,null).exports,q={components:{pagination:F},data:function(){return{adminOrders:[],pagination:{}}},methods:{getAdminOrders:function(){var t="https://vue-course-api.hexschool.io/api/zou06/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),e=this;e.$store.commit("SET_LOADING",!0),e.axios.get(t).then(function(t){t.data.success&&(e.adminOrders=t.data.orders,e.$store.commit("SET_LOADING",!1)),e.$store.commit("SET_LOADING",!1)})}},created:function(){this.getAdminOrders(),this.$store.commit("SET_ADMINACTIVE","adminOrders")}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",{staticClass:"admin_title"},[t._v("訂單列表")]),t._v(" "),s("div",{staticClass:"table-responsive mb-3"},[s("table",{staticClass:"table"},[t._m(0),t._v(" "),s("tbody",t._l(t.adminOrders,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-center"},[t._v(t._s(t.$displayDate(e.create_at)))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.user.email))]),t._v(" "),s("td",{staticClass:"text-center"},t._l(e.products,function(e){return s("div",{key:e.id},[t._v("\n              "+t._s(e.product.title)+" "+t._s(e.qty)+" "+t._s(e.product.unit))])}),0),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(t.$displayCurrency(e.total)))]),t._v(" "),s("td",{staticClass:"text-center"},[!0===e.is_paid?s("span",{staticClass:"text-success"},[t._v("已付款")]):s("span",[t._v("未付款")])])])}),0)])]),t._v(" "),s("pagination",{staticClass:"ml-3",attrs:{pagination:t.pagination},on:{"click-page":t.getAdminOrders}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"text-center"},[s("th",{staticClass:"admin_date"},[t._v("購買時間")]),t._v(" "),s("th",{staticClass:"adminorders_email"},[t._v("Email")]),t._v(" "),s("th",{staticClass:"adminorders_bought"},[t._v("購買品項")]),t._v(" "),s("th",{staticClass:"adminorders_total"},[t._v("應付金額")]),t._v(" "),s("th",{staticClass:"adminorders_paid"},[t._v("是否付款")])])])}]};var V=s("VU/8")(q,G,!1,function(t){s("Ixbe")},null,null).exports,R={components:{pagination:F},data:function(){return{tempProduct:{},addition:!1,picUploading:!1,picErrorMsg:!1}},methods:{getAdminProducts:function(t){this.$store.dispatch("getAdminProducts",t)},openProductModal:function(t){t?(this.tempProduct=I()({},t),this.addition=!1):(this.tempProduct={},this.addition=!0),$("#productModal").modal("show")},uploadProduct:function(){var t=this;if(t.addition){t.axios.post("https://vue-course-api.hexschool.io/api/zou06/admin/product",{data:t.tempProduct}).then(function(e){e.data.success&&($("#productModal").modal("hide"),t.getAdminProducts())})}else{var e="https://vue-course-api.hexschool.io/api/zou06/admin/product/"+t.tempProduct.id;t.axios.put(e,{data:t.tempProduct}).then(function(e){e.data.success&&($("#productModal").modal("hide"),t.getAdminProducts())})}},uploadPic:function(){var t=this;t.picUploading=!0;var e=new FormData;e.append("file-to-upload",t.$refs.files.files[0]),t.axios.post("https://vue-course-api.hexschool.io/api/zou06/admin/upload",e,{Headers:{"Content-Type":"multipart/form-data"}}).then(function(e){e.data.success?(t.picUploading=!1,t.picErrorMsg=!1,t.$set(t.tempProduct,"imageUrl",e.data.imageUrl)):(t.picUploading=!1,t.picErrorMsg=!0)})},openDelModal:function(t){this.$store.commit("SET_MSG",{event:"delAdminProduct",object:t.title,objectId:t.id})}},computed:{adminProducts:function(){return this.$store.state.adminModule.adminProducts},pagination:function(){return this.$store.state.adminModule.pagination}},created:function(){this.getAdminProducts(),this.$store.commit("SET_ADMINACTIVE","adminProducts")}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",{staticClass:"admin_title"},[t._v("產品列表")]),t._v(" "),s("div",{staticClass:"text-right mb-3 mr-3"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openProductModal()}}},[t._v("建立新的商品")])]),t._v(" "),s("div",{staticClass:"table-responsive mb-3"},[s("table",{staticClass:"table"},[t._m(0),t._v(" "),s("tbody",t._l(t.adminProducts,function(e){return s("tr",{key:e.id},[s("td",{staticClass:"text-center"},[t._v(t._s(e.category))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v(t._s(e.title))]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(t.$displayCurrency(e.origin_price)))]),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(t.$displayCurrency(e.price)))]),t._v(" "),s("td",{staticClass:"text-center"},[1===e.is_enabled?s("span",{staticClass:"text-success"},[t._v("啟用")]):s("span",[t._v("未啟用")])]),t._v(" "),s("td",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(s){return t.openProductModal(e)}}},[t._v("編輯")]),t._v(" "),s("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(s){return t.openDelModal(e)}}},[t._v("刪除")])])])}),0)])]),t._v(" "),s("pagination",{staticClass:"ml-3",attrs:{pagination:t.pagination},on:{"click-page":t.getAdminProducts}}),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"productModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[s("div",{staticClass:"modal-content border-0"},[s("div",{staticClass:"modal-header bg-primary text-white"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.addition?s("span",[t._v("新增商品")]):s("span",[t._v("編輯商品")])]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-4 mb-3"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入網址"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"customFile"}},[t._v("\n                  或上傳圖片（3MB內）\n                  "),t.picUploading?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),s("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadPic}})]),t._v(" "),t.picErrorMsg?s("div",{staticClass:"border border-danger p-3 text-center"},[t._v("圖片檔案過大或格式錯誤，請重新上傳")]):s("img",{staticClass:"img-fluid",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),t._v(" "),s("div",{staticClass:"col-sm-8"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"price"}},[t._v("單位")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("商品簡述")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入商品簡述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"content"}},[t._v("商品說明")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入商品說明"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var s=t.tempProduct.is_enabled,a=e.target,i=a.checked?1:0;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&t.$set(t.tempProduct,"is_enabled",s.concat([null])):r>-1&&t.$set(t.tempProduct,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-outline-black",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.uploadProduct}},[t._v("確認")])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"text-center"},[s("th",{staticClass:"adminproducts_cat"},[t._v("分類")]),t._v(" "),s("th",{staticClass:"admin_name"},[t._v("商品名稱")]),t._v(" "),s("th",{staticClass:"adminproducts_oriprice"},[t._v("原價")]),t._v(" "),s("th",{staticClass:"adminproducts_price"},[t._v("售價")]),t._v(" "),s("th",{staticClass:"admin_enabled"},[t._v("是否啟用")]),t._v(" "),s("th",{staticClass:"admin_edition"},[t._v("編輯")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var Y=s("VU/8")(R,L,!1,function(t){s("Foe+")},null,null).exports,z={data:function(){return{}},methods:{getCusCart:function(){this.$store.dispatch("getCusCart")},setCusNavbar:function(){document.body.clientWidth<768&&document.querySelector(".cusnavbar_toggler").click()}},computed:{cusActive:function(){return this.$store.state.cusActive},carts:function(){return this.$store.state.cusCart.carts}},created:function(){this.getCusCart()}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"navbar navbar-expand-md navbar-dark fixed-top bg-primary"},[s("div",{staticClass:"container-xl px-0 px-xl-3"},[s("h1",{staticClass:"brand"},[s("router-link",{staticClass:"w-100 h-100",attrs:{to:"/index"}}),t._v("劉記茗茶\n      ")],1),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse cusnavbar_collapse"},[s("ul",{staticClass:"navbar-nav ml-auto text-center",on:{click:function(e){return t.setCusNavbar(e.target)}}},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"cusIndex"===t.cusActive},attrs:{to:"/index"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"cusProducts"===t.cusActive},attrs:{to:"/products"}},[t._v("商品")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"cusFavs"===t.cusActive},attrs:{to:"/favs"}},[t._v("收藏")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"cusCart"===t.cusActive},attrs:{to:"/cart"}},[t._v("購物車（"+t._s(t.carts.length)+"）")])],1),t._v(" "),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{active:"cusLogin"===t.cusActive},attrs:{to:"/login"}},[t._v("登入")])],1)])])])]),t._v(" "),s("div",{staticClass:"collapse cusnavbar_collapse mask cusnavbar_mask"})])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler cusnavbar_toggler border-0",attrs:{type:"button","data-toggle":"collapse","data-target":".cusnavbar_collapse","aria-controls":"cusnavbar_collapse","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var B={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-primary-dark"},[s("div",{staticClass:"container-xl py-3 text-white text-center"},[s("div",{staticClass:"h1 mb-3"},[t._v("劉記茗茶 Liu's Tea")]),t._v(" "),s("div",{staticClass:"mb-3"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fab fa-github icon_common text-white mr-5"})]),t._v(" "),s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fab fa-instagram icon_common text-white mr-5"})]),t._v(" "),s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fab fa-facebook icon_common text-white"})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 mb-3"},[s("a",{staticClass:"h6 text-white mb-3",attrs:{href:"tel:+886-2-26000000",target:"_blank"}},[s("i",{staticClass:"fas fa-phone-alt"}),t._v("\n          +886-2-2600-0000\n        ")]),t._v(" "),s("br"),t._v(" "),s("a",{staticClass:"h6 text-white",attrs:{href:"mailto:goodtea@mmmmail.com",target:"_blank"}},[s("i",{staticClass:"far fa-envelope mr-1"}),t._v("\n          goodtea@mmmmail.com\n        ")])]),t._v(" "),s("div",{staticClass:"col-md-6 mb-3"},[s("a",{staticClass:"h6 text-white mb-3",attrs:{href:"https://www.google.com.tw/maps/place/244%E6%96%B0%E5%8C%97%E5%B8%82%E6%9E%97%E5%8F%A3%E5%8D%80%E7%AB%B9%E6%9E%97%E8%B7%AF27%E8%99%9F/",target:"_blank"}},[s("i",{staticClass:"fas fa-map-pin mr-1"}),t._v("\n        244 新北市林口區竹林路27號")]),t._v(" "),s("br"),t._v(" "),s("span",[t._v("© 2021 Liu's Tea All Rights Reserved")])])]),t._v(" "),s("h6",[t._v("本網站僅為練習用，所有資訊均屬虛構，如有雷同純屬巧合")])])])}]};var Q={components:{cusNavbar:s("VU/8")(z,W,!1,function(t){s("hO2C")},null,null).exports,cusFooter:s("VU/8")({},B,!1,function(t){s("y7sW")},null,null).exports}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("cus-navbar"),this._v(" "),e("main",{staticClass:"cus bg-primary"},[e("router-view",{staticClass:"container-xl"})],1),this._v(" "),e("cus-footer")],1)},staticRenderFns:[]};var J=s("VU/8")(Q,H,!1,function(t){s("2Wx6")},null,null).exports,K={props:{bases:Array},methods:I()({},Object(l.b)(["addToCusFavs","delCusFav"]),{addToCusCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCusCart",{cusProduct:t,qty:e})}}),computed:I()({},Object(l.c)(["carting"]))},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card_lowerhalf px-3 pt-3"},[t.bases.length>0?s("div",t._l(t.bases,function(e){return s("div",{key:e.id,staticClass:"d-flex pb-3"},[s("div",{staticClass:"productscard_img rounded bg_cover mr-2",style:{"background-image":"url("+e.imageUrl+")"}},[s("router-link",{staticClass:"w-100 h-100",attrs:{to:"/products/"+e.id}})],1),t._v(" "),s("div",{staticClass:"flex-fill d-flex flex-column justify-content-between"},[s("router-link",{staticClass:"h6 text-center",attrs:{to:"/products/"+e.id}},[t._v(t._s(e.title)+"\n        ")]),t._v(" "),s("div",{staticClass:"d-flex justify-content-around align-items-end"},[s("del",{staticClass:"text-muted"},[s("small",[t._v("原價 "+t._s(e.origin_price)+" 元")])]),t._v(" "),s("span",{staticClass:"text-secondary"},[t._v("特價 "+t._s(e.price)+" 元")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-around"},[!1===e.favored?s("button",{staticClass:"btn btn-outline-tertiary btn-sm btn_fav",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.addToCusFavs(e.id)}}},[t._v("加入收藏")]):t._e(),t._v(" "),!0===e.favored?s("button",{staticClass:"btn btn-tertiary btn-sm",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.delCusFav(e.id)}}},[t._v("取消收藏")]):t._e(),t._v(" "),!1===t.carting?s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return s.stopPropagation(),t.addToCusCart(e)}}},[t._v("加入購物車")]):t._e(),t._v(" "),!0===t.carting?s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button",disabled:""}},[t._v("商品處理中")]):t._e()])],1)])}),0):s("div",{staticClass:"flex_center pb-3 h3"},[t._v("目前尚無商品")])])},staticRenderFns:[]},X=s("VU/8")(K,Z,!1,null,null,null).exports,tt={data:function(){return{favoredProducts:[],adProducts:[]}},components:{productsCard:X},methods:I()({},Object(l.b)(["getCusProducts","addToCusFavs","delCusFav"]),{getAdproducts:function(){this.favoredProducts=[];for(var t=[],e=this.cusProducts.length,s=0;s<e;s++)this.cusProducts[s].favored?this.favoredProducts.push(this.cusProducts[s]):t.push(this.cusProducts[s]);var a=t.length,i=void 0;if(a>=4){for(var r=a-4;a-- >r;){var o=[t[i=Math.floor((a+1)*Math.random())],t[a]];t[a]=o[0],t[i]=o[1]}this.adProducts=t.slice(r)}else t.sort(function(){return Math.random()-.5}),this.adProducts=t},addToCusCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCusCart",{cusProduct:t,qty:e})}}),computed:I()({},Object(l.c)(["cusProducts","carting"])),watch:{cusProducts:{handler:function(){this.cusProducts.length>1&&this.getAdproducts()},deep:!0}},created:function(){this.getCusProducts(),this.$store.commit("SET_CUSACTIVE","cusFavs")}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-xl"},[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-tertiary",attrs:{to:"/index"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("收藏")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7 mb-4"},[s("h3",{staticClass:"rounded-top card_header"},[t._v("收藏清單")]),t._v(" "),s("products-card",{attrs:{bases:t.favoredProducts}})],1),t._v(" "),s("div",{staticClass:"col-md-5 mb-4"},[s("h3",{staticClass:"rounded-top card_header"},[t._v("推薦商品")]),t._v(" "),s("products-card",{attrs:{bases:t.adProducts}})],1)])])},staticRenderFns:[]};var st=s("VU/8")(tt,et,!1,function(t){s("V9Ui")},null,null).exports,at={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"carousel mx_n15px rounded_breakpoint",attrs:{id:"carouselExampleIndicators","data-ride":"carousel"}},[s("ol",{staticClass:"carousel-indicators"},[s("li",{staticClass:"active carousel_indicators",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"0"}}),t._v(" "),s("li",{staticClass:"carousel_indicators",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}}),t._v(" "),s("li",{staticClass:"carousel_indicators",attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":"2"}})]),t._v(" "),s("div",{staticClass:"carousel-inner"},[s("div",{staticClass:"carousel-item active"},[s("div",{staticClass:"w-100 header cusindex_header1",attrs:{alt:"#"}},[s("h2",{staticClass:"header_text cusindex_header1_text"},[s("span",[t._v("生於臺灣純淨山林")]),s("br"),t._v(" "),s("span",[t._v("聚天地精華而成")])])])]),t._v(" "),s("div",{staticClass:"carousel-item"},[s("div",{staticClass:"w-100 header cusindex_header2",attrs:{alt:"#"}},[s("h2",{staticClass:"header_text cusindex_header2_text"},[s("span",[t._v("堅持有機農法")]),s("br"),t._v(" "),s("span",[t._v("不使用化學藥劑")])])])]),t._v(" "),s("div",{staticClass:"carousel-item"},[s("div",{staticClass:"w-100 header cusindex_header3",attrs:{alt:"#"}},[s("h2",{staticClass:"header_text cusindex_header3_text"},[s("span",[t._v("採取小農契作")]),s("br"),t._v(" "),s("span",[t._v("兼顧品質與農民利益")])])])])]),t._v(" "),s("a",{staticClass:"carousel_control carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[s("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Previous")])]),t._v(" "),s("a",{staticClass:"carousel_control carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[s("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{staticClass:"sr-only"},[t._v("Next")])])]),t._v(" "),s("div",{staticClass:"row cusindex_content_header flex_center display-4"},[t._v("為何要喝茶？")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 bg_cover cusindex_content cusindex_content1_img"}),t._v(" "),s("div",{staticClass:"col-md-6 cusindex_content flex_center"},[t._v("根據醫學研究，茶葉具有提神、抗氧化、降低血糖及血脂等多重功效，是良好的保健食品。又茶葉是東亞文化中最重要的飲料，飲用茶葉、學習茶葉知識有助提升個人氣質、建立優雅的個人形象。")])]),t._v(" "),s("div",{staticClass:"row cusindex_content_header flex_center display-4"},[t._v("為何選擇劉記茗茶？")]),t._v(" "),s("div",{staticClass:"row d-flex"},[s("div",{staticClass:"flex_center cusindex_content col-md-6 order-2 order-md-1"},[t._v("劉記販售的所有茶葉均為臺灣生產，生長環境純淨，以有機方式栽培不使用任何化學藥劑，採小農契作方式收購同時保障品質及農民權益，採收後即交由資歷豐富之茶師製茶。唯有堅持，才能產出得獎無數的精品茶葉。")]),t._v(" "),s("div",{staticClass:"col-md-6 bg_cover cusindex_content\n    cusindex_content2_img order-1 order-md-2"})])])}]};var it=s("VU/8")({created:function(){this.$store.commit("SET_MSG",{event:"showingCoupon"}),this.$store.commit("SET_CUSACTIVE","cusIndex")}},at,!1,function(t){s("JN9a")},null,null).exports,rt=s("mvHQ"),ot=s.n(rt),nt={data:function(){return{user:{username:"",password:""},errorMsg:!1,rememberSwitch:!1}},methods:{signin:function(){var t=this;t.axios.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(e){if(e.data.success){var s=e.data.token,a=e.data.expired;document.cookie="myToken="+s+"; expires="+new Date(a),t.$router.push("/admin")}else t.user.password="",t.errorMsg=!0})},rememberInfo:function(){switch(this.rememberSwitch){case!0:this.rememberSwitch=!1,this.clearInfo();break;default:this.rememberSwitch=!0,this.saveInfo()}},saveInfo:function(){this.rememberSwitch&&localStorage.setItem("user",ot()(this.user.username))},clearInfo:function(){localStorage.setItem("user","")}},created:function(){this.user.username=JSON.parse(localStorage.getItem("user"))||"",this.$store.commit("SET_CUSACTIVE","cusLogin")}},ct={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("validation-observer",{attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid,i=e.handleSubmit;return[s("form",{staticClass:"py-5 cuslogin_form text-center",on:{submit:function(e){return e.preventDefault(),i(t.signin)}}},[s("div",{staticClass:"h1 mb-4 font-weight-normal text-white"},[t._v("會員登入")]),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.classes;return[s("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("請輸入 Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",class:a,attrs:{type:"email",id:"inputEmail",placeholder:"請輸入 Email",required:"",autofocus:""},domProps:{value:t.user.username},on:{change:function(e){return t.saveInfo()},input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.classes;return[s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("請輸入密碼")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control mb-3",class:a,attrs:{type:"password",id:"inputPassword",placeholder:"請輸入密碼",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]}}],null,!0)}),t._v(" "),s("div",{staticClass:"checkbox mb-3"},[s("label",{staticClass:"text-white cuslogin_checkbox"},[s("input",{staticClass:"mr-2",attrs:{type:"checkbox"},on:{click:function(e){return t.rememberInfo()}}}),t._v("記住帳號\n        ")])]),t._v(" "),t.errorMsg?s("div",{staticClass:"error_msg"},[t._v("帳號或密碼錯誤，請重新輸入")]):t._e(),t._v(" "),s("button",{staticClass:"btn btn-lg btn-secondary btn-block",attrs:{type:"submit",disabled:a}},[t._v("登入")])],1)]}}])})],1)},staticRenderFns:[]};var dt=s("VU/8")(nt,ct,!1,function(t){s("h1ik")},"data-v-669ae948",null).exports,lt={data:function(){return{isActive:""}},methods:I()({},Object(l.b)(["getCusProducts","addToCusFavs","delCusFav"]),{filterCusProducts:function(){var t=this;switch(this.isActive){case"":return this.cusProducts;case"all":return this.setScrollY(),this.cusProducts;default:return this.setScrollY(),this.cusProducts.filter(function(e){return e.category===t.isActive})}},setScrollY:function(){document.body.clientWidth<768?window.scrollTo(0,420):document.body.clientWidth>=768&&document.body.clientWidth<992?window.scrollTo(0,520):document.body.clientWidth>=992&&window.scrollTo(0,670)},addToCusCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("addToCusCart",{cusProduct:t,qty:e})}}),computed:Object(l.c)(["cusProducts","cats","pagination","carting"]),created:function(){this.getCusProducts(),this.$store.commit("SET_CUSACTIVE","cusProducts")}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-tertiary",attrs:{to:"/index"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("商品")])])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"row justify-content-center cusproducts_content pt-4"},[s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"card rounded border-0 mb-4"},[s("h3",{staticClass:"card_header"},[t._v("商品列表")]),t._v(" "),s("ul",{staticClass:"list-group list-group-flush text-center",attrs:{role:"tablist"}},[s("a",{staticClass:"list-group-item list-group-item-action",class:{active:"all"===t.isActive},attrs:{href:"#","data-toggle":"list",role:"tab"},on:{click:function(e){e.preventDefault(),t.filterCusProducts(),t.isActive="all"}}},[t._v("所有茶品")]),t._v(" "),t._l(t.cats,function(e){return s("a",{key:e,staticClass:"list-group-item list-group-item-action",class:{active:t.isActive===e},attrs:{href:"#","data-toggle":"list",role:"tab"},on:{click:function(s){s.preventDefault(),t.filterCusProducts(),t.isActive=e}}},[t._v(t._s(e))])})],2)])]),t._v(" "),s("div",{staticClass:"col-md-9"},[s("div",{staticClass:"row"},t._l(t.filterCusProducts(),function(e){return s("div",{key:e.id,staticClass:"col-md-6 mb-4"},[s("div",{staticClass:"card border-0 rounded shadow-sm"},[s("div",{staticClass:"bg_cover rounded-top",staticStyle:{height:"200px"},style:{"background-image":"url("+e.imageUrl+")"}},[s("router-link",{staticClass:"w-100 h-100",attrs:{to:"/products/"+e.id}})],1),t._v(" "),s("div",{staticClass:"card-body"},[s("span",{staticClass:"badge badge-primary cusproducts_badge float-right ml-2"},[t._v(t._s(e.category))]),t._v(" "),s("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[s("del",{staticClass:"h6"},[t._v("原價 "+t._s(e.origin_price)+" 元")]),t._v(" "),s("div",{staticClass:"h5 text-secondary"},[t._v("現在只要 "+t._s(e.price)+" 元")])])]),t._v(" "),s("div",{staticClass:"card-footer d-flex justify-content-between"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:"/products/"+e.id}},[t._v("\n                商品\n                "),s("br"),t._v("資訊\n              ")]),t._v(" "),!1===e.favored?s("button",{staticClass:"btn btn-outline-tertiary btn-sm btn_fav",attrs:{type:"button"},on:{click:function(s){return t.addToCusFavs(e.id)}}},[t._v("\n                加入\n                "),s("br"),t._v("收藏\n              ")]):t._e(),t._v(" "),!0===e.favored?s("button",{staticClass:"btn btn-tertiary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.delCusFav(e.id)}}},[t._v("\n                取消\n                "),s("br"),t._v("收藏\n              ")]):t._e(),t._v(" "),!1===t.carting?s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.addToCusCart(e)}}},[t._v("\n                加入\n                "),s("br"),t._v("購物車\n              ")]):t._e(),t._v(" "),!0===t.carting?s("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button",disabled:""}},[t._v("\n                商品\n                "),s("br"),t._v("處理中\n              ")]):t._e()],1)])])}),0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header cusproducts_header mx_n15px"},[e("div",{staticClass:"header_text cusproducts_header_text h1"},[this._v("\n      空持百千偈。\n      "),e("br"),this._v(" "),e("span",[this._v("不如喫茶去")])])])}]};var vt=s("VU/8")(lt,ut,!1,function(t){s("Smb/")},null,null).exports,mt={data:function(){return{cusProductId:"",cusProduct:{},qty:1,adProducts:[]}},components:{productsCard:X},methods:I()({},Object(l.b)(["getCusProducts","addToCusFavs","delCusFav"]),{addToCusCart:function(t){var e=this.qty;this.$store.dispatch("addToCusCart",{cusProduct:t,qty:e})},getCusProduct:function(){this.adProducts=[];for(var t=this.cusProducts.length,e=[],s=0;s<t;s++)this.cusProducts[s].id===this.cusProductId?this.cusProduct=this.cusProducts[s]:e.push(this.cusProducts[s]);for(var a=e.length,i=void 0,r=a-4;a-- >r;){var o=[e[i=Math.floor((a+1)*Math.random())],e[a]];e[a]=o[0],e[i]=o[1]}this.adProducts=e.slice(r)}}),computed:I()({},Object(l.c)(["cusProducts","carting"]),{watched:function(){return{cusProducts:this.cusProducts,cusProductId:this.cusProductId}}}),watch:{watched:{handler:function(){this.cusProducts.length>1&&this.getCusProduct()}}},created:function(){this.getCusProducts(),this.cusProductId=this.$route.params.cusProductId,this.$store.commit("SET_CUSACTIVE","cusProducts")},beforeRouteUpdate:function(t,e,s){this.getCusProducts(),this.cusProductId=t.params.cusProductId,this.qty=1,s()}},pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-tertiary",attrs:{to:"/index"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-tertiary",attrs:{to:"/products"}},[t._v("商品")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(t._s(t.cusProduct.title))])])]),t._v(" "),s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"bg_cover cusproduct_header_img",style:{"background-image":"url("+t.cusProduct.imageUrl+")"}})]),t._v(" "),s("div",{staticClass:"col-md-5 d-flex flex-column justify-content-between bg-light\n    p-4 cusproduct_header_text"},[s("h2",{staticClass:"text-center font-weight-bold"},[t._v(t._s(t.cusProduct.title))]),t._v(" "),s("h6",[t._v(t._s(t.cusProduct.description))]),t._v(" "),s("div",{staticClass:"d-flex flex-wrap justify-content-between align-items-baseline"},[s("del",[t._v("原價 "+t._s(t.cusProduct.origin_price)+" 元")]),t._v(" "),s("div",{staticClass:"h5 text-secondary font-weight-bold"},[t._v("特價 "+t._s(t.cusProduct.price)+" 元")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("span",{staticClass:"h4"},[t._v("購買數量")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],staticClass:"cusproduct_select rounded pl-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.qty=e.target.multiple?s:s[0]}}},t._l(10,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0)]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[!1===t.cusProduct.favored?s("button",{staticClass:"btn btn-outline-tertiary btn_fav",attrs:{type:"button"},on:{click:function(e){return t.addToCusFavs(t.cusProductId)}}},[t._v("加入收藏")]):t._e(),t._v(" "),!0===t.cusProduct.favored?s("button",{staticClass:"btn btn-tertiary",attrs:{type:"button"},on:{click:function(e){return t.delCusFav(t.cusProductId)}}},[t._v("取消收藏")]):t._e(),t._v(" "),!1===t.carting?s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.addToCusCart(t.cusProduct)}}},[t._v("加入購物車")]):t._e(),t._v(" "),!0===t.carting?s("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:""}},[t._v("商品處理中")]):t._e()])])]),t._v(" "),s("div",{staticClass:"row no-gutters pt-4"},[s("div",{staticClass:"col-md-7 px-md-3"},[s("h3",{staticClass:"cusproduct_heading"},[t._v("商品介紹")]),t._v(" "),s("p",{staticClass:"cusproduct_content"},[t._v(t._s(t.cusProduct.content))]),t._v(" "),s("h3",{staticClass:"cusproduct_heading"},[t._v("保存方式及期限")]),t._v(" "),s("p",{staticClass:"cusproduct_content"},[t._v("由於茶葉容易吸收濕氣及周邊氣味，故建議開封後放入密封罐，儲存於陰涼乾燥處，依此方式可保存兩年，製造日期印製於包裝上。")]),t._v(" "),s("h3",{staticClass:"cusproduct_heading"},[t._v("沖泡方法")]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"col-md-5 mb-4"},[s("h3",{staticClass:"rounded-top card_header"},[t._v("推薦商品")]),t._v(" "),s("products-card",{attrs:{bases:t.adProducts}})],1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"cusproduct_content"},[s("ul",[s("ol",[t._v("＊熱水沖泡")]),t._v(" "),s("ol",[t._v("１、將茶葉或茶包放入杯中")]),t._v(" "),s("ol",[t._v("２、加入約 250c.c. 的熱水")]),t._v(" "),s("ol",[t._v("３、浸泡 2～3 分鐘")]),t._v(" "),s("ol",[t._v("４、過濾茶葉或取出茶包後即可飲用")])]),t._v(" "),s("ul",[s("ol",[t._v("＊冷水沖泡")]),t._v(" "),s("ol",[t._v("１、將茶葉或茶包放入 600c.c. 冷水中")]),t._v(" "),s("ol",[t._v("２、將容器放入冰箱")]),t._v(" "),s("ol",[t._v("３、浸泡 4～8 小時後即可飲用")])])])}]};var _t=s("VU/8")(mt,pt,!1,function(t){s("2hHT")},null,null).exports,ft=s("Gu7T"),Ct=s.n(ft),ht={data:function(){return{coupon:"",couponError:!1,tempQty:0,qtyError:!1,adProducts:[]}},components:{productsCard:X},methods:I()({},Object(l.b)(["getCusProducts","getCusCart"]),{getAdproducts:function(){for(var t=[].concat(Ct()(this.cusProducts)),e=t.length,s=this.cusCart.carts.length,a=0;a<s;a++)for(var i=0;i<e;i++)if(t[i].id===this.cusCart.carts[a].product_id){t.splice(i,1);break}var r=t.length,o=void 0;if(r>=4){for(var n=r-4;r-- >n;){var c=[t[o=Math.floor((r+1)*Math.random())],t[r]];t[r]=c[0],t[o]=c[1]}this.adProducts=t.slice(n)}else t.sort(function(){return Math.random()-.5}),this.adProducts=t},openDelModal:function(t){this.$store.commit("SET_MSG",{event:"delCusCart",object:t.product.title,objectId:t.id})},setCartQty:function(t,e,s){var a=this;this.$store.commit("SET_CARTING",!0);var i="https://vue-course-api.hexschool.io/api/zou06/cart",r=i+"/"+t.id;switch(this.axios.delete(r),s){default:this.axios.post(i,{data:{product_id:t.product.id,qty:e+t.qty}}).then(function(t){t.data.success&&a.$store.dispatch("getCusCart")});break;case"non-operation":if(e<1||!0===isNaN(e)){this.qtyError=!0;break}this.qtyError=!1,this.axios.post(i,{data:{product_id:t.product.id,qty:e}}).then(function(t){t.data.success&&a.$store.dispatch("getCusCart")})}},checkCusCoupon:function(){var t=this;t.axios.post("https://vue-course-api.hexschool.io/api/zou06/coupon",{data:{code:t.coupon}}).then(function(e){e.data.success?(t.couponError=!1,t.coupon="",t.$store.dispatch("getCusCart")):t.couponError=!0})}}),computed:I()({},Object(l.c)(["cusProducts","cusCart","carting"]),{watched:function(){return{cusProducts:this.cusProducts,cusCart:this.cusCart}}}),watch:{watched:function(){this.cusProducts.length>1&&this.getAdproducts()}},created:function(){this.getCusProducts(),this.getCusCart(),this.$store.commit("SET_CUSACTIVE","cusCart")}},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{staticClass:"text-tertiary",attrs:{to:"/index"}},[t._v("首頁")])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("購物車")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7 mb-4"},[s("h3",{staticClass:"card_header"},[t._v("購物車清單")]),t._v(" "),s("div",{staticClass:"card_lowerhalf mb-3 mb-md-4 text-center"},[t.cusCart.carts.length>0?s("div",[t._l(t.cusCart.carts,function(e){return s("div",{key:e.id,staticClass:"p-3 border-bottom"},[s("div",{staticClass:"d-flex mb-3"},[s("div",{staticClass:"flex-shrink-0 cuscart_card_img rounded bg_cover",style:{"background-image":"url("+e.product.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"flex-fill d-flex flex-column justify-content-between"},[s("div",{staticClass:"d-flex align-items-start"},[s("div",{staticClass:"cuscart_card_text text-center flex-fill align-self-center"},[t._v(t._s(e.product.title))]),t._v(" "),s("button",{staticClass:"btn ml-auto",class:{"btn-danger":t.carting,"btn-outline-danger":!t.carting},attrs:{type:"button",disabled:t.carting},on:{click:function(s){return t.openDelModal(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),s("div",{staticClass:"input-group"},[s("button",{staticClass:"btn btn_setQty rounded-left border-right-0",class:{"btn-tertiary":t.carting,"btn-outline-tertiary":!t.carting},attrs:{disabled:t.carting||1===e.qty},on:{click:function(s){return t.setCartQty(e,-1,"operation")}}},[s("span",{staticClass:"btn_setQty_word"},[t._v("－")])]),t._v(" "),s("input",{staticClass:"form-control border-tertiary text-center",attrs:{type:"number",min:"1"},domProps:{value:e.qty},on:{change:function(s){t.setCartQty(e,parseInt(s.target.value),"non-operation")}}}),t._v(" "),s("button",{staticClass:"btn btn_setQty rounded-right border-left-0",class:{"btn-tertiary":t.carting,"btn-outline-tertiary":!t.carting},attrs:{disabled:t.carting},on:{click:function(s){return t.setCartQty(e,1,"operation")}}},[s("span",{staticClass:"btn_setQty_word"},[t._v("＋")])])])])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[e.coupon?t._e():s("span"),t._v(" "),e.coupon?s("span",{staticClass:"cuscart_card_text text-success"},[t._v("已套用優惠碼")]):t._e(),t._v(" "),s("span",{staticClass:"cuscart_card_text"},[t._v(t._s(t.$displayCurrency(e.total)))])])])}),t._v(" "),s("div",{staticClass:"p-3 bg-card-footer"},[s("h5",{staticClass:"text-right mb-3"},[t._v("總計 "+t._s(t.$displayCurrency(t.cusCart.total)))]),t._v(" "),s("h5",{staticClass:"text-right text-success"},[t._v("折扣價\n              "+t._s(t.$displayCurrency(t.cusCart.final_total)))])])],2):s("div",{staticClass:"flex_center p-3 h3"},[t._v("目前尚無商品")])]),t._v(" "),s("div",{staticClass:"input-group mb-3 mb-md-4"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.coupon,expression:"coupon",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon},on:{input:function(e){e.target.composing||(t.coupon=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn",class:{"btn-tertiary":t.carting,"btn-outline-tertiary":!t.carting},attrs:{type:"button",disabled:t.carting},on:{click:t.checkCusCoupon}},[t._v("套用優惠碼")])])]),t._v(" "),t.couponError?s("h6",{staticClass:"error_msg"},[t._v("優惠券錯誤或過期，請重新輸入")]):t._e(),t._v(" "),t.qtyError?s("h6",{staticClass:"error_msg"},[t._v("商品數量錯誤，請重新輸入")]):t._e(),t._v(" "),s("router-link",{staticClass:"btn btn-secondary btn-lg btn-block",class:{disabled:t.carting},attrs:{to:"/info"}},[t._v("確認並進入下一階段")])],1),t._v(" "),s("div",{staticClass:"col-md-5 mb-4"},[s("h3",{staticClass:"card_header"},[t._v("推薦商品")]),t._v(" "),s("products-card",{attrs:{bases:t.adProducts}})],1)])])},staticRenderFns:[]};var bt=s("VU/8")(ht,gt,!1,function(t){s("/tRK")},null,null).exports,xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"py-md-4 row justify-content-center"},[s("validation-observer",{staticClass:"col-md-8 bg_light_breakpoint",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid,i=e.handleSubmit;return[s("form",{staticClass:"p-4 bg-light rounded_breakpoint",on:{submit:function(e){return e.preventDefault(),i(t.createOrder)}}},[s("div",{staticClass:"d-flex justify-content-between align-cusCartItems-center mb-3"},[s("h2",[s("strong",[t._v("收件資訊")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between progress bg-primary"},[s("div",{staticClass:"progress_icon progress_chara1"}),t._v(" "),s("div",{staticClass:"progress_icon progress_icon_active"}),t._v(" "),s("div",{staticClass:"progress_icon"})])]),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("label",{attrs:{title:"必填",for:"receiverName"}},[t._v("收件人姓名\n            "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:i,attrs:{id:"receiverName",type:"text",name:"收件人姓名",placeholder:"劉好茶"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("label",{attrs:{title:"必填",for:"receiverEmail"}},[t._v("收件人 Email\n            "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:i,attrs:{id:"receiverEmail",type:"email",name:"收件人 Email",placeholder:"goodtea@mmmmail.com"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("label",{attrs:{title:"必填",for:"receiverTel"}},[t._v("收件人電話\n            "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:i,attrs:{id:"receiverTel",type:"tel",name:"收件人電話",placeholder:"+886-2-26000000"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"form-group",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("label",{attrs:{title:"必填",for:"receiverAdd"}},[t._v("收件地址\n            "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:i,attrs:{id:"receiverAdd",type:"text",name:"收件地址",placeholder:"新北市林口區竹林路27號"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("div",{staticClass:"form-group mb-4"},[s("label",{attrs:{for:"comment"}},[t._v("留言")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"留言",id:"comment",placeholder:"請留下寄送備註或其他想說的話",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),t._v(" "),s("div",[s("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"submit",disabled:a}},[t._v("送出訂單")])])],1)]}}])}),t._v(" "),s("div",{staticClass:"col-lg-4 d-none d-lg-block"},[s("div",{staticClass:"mb-4"},[s("h3",{staticClass:"card_header"},[t._v("訂單金額")]),t._v(" "),s("div",{staticClass:"card_lowerhalf p-3"},[s("div",{staticClass:"d-flex justify-content-between mb-1"},[s("span",[t._v("小計")]),t._v(" "),s("span",[t._v(t._s(t.$displayCurrency(t.cusCart.final_total)))])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between mb-2"},[s("span",[t._v("運費")]),t._v(" "),s("span",[t._v(t._s(t.$displayCurrency()))])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between h5"},[s("b",[t._v("總計")]),t._v(" "),s("b",[t._v(t._s(t.$displayCurrency(t.cusCart.final_total)))])])])]),t._v(" "),s("div",[s("h3",{staticClass:"card_header"},[t._v("訂單內容")]),t._v(" "),s("div",{staticClass:"card_lowerhalf pt-3 px-3"},t._l(t.cusCart.carts,function(e){return s("div",{key:e.id,staticClass:"d-flex pb-3"},[s("div",{staticClass:"cuscartinfo_card_img bg_cover mr-3",style:{"background-image":"url("+e.product.imageUrl+")"}}),t._v(" "),s("div",{staticClass:"flex-fill d-flex flex-column justify-content-between"},[s("h6",{staticClass:"text-center"},[t._v(t._s(e.product.title))]),t._v(" "),e.coupon?s("div",{staticClass:"text-center text-success"},[t._v("已使用優惠券")]):t._e(),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("span",[t._v(t._s(e.qty)+t._s(e.product.unit))]),t._v(" "),s("span",[t._v(t._s(t.$displayCurrency(t.discountedPrice(e))))])])])])}),0)])])],1)])},staticRenderFns:[]};var yt=s("VU/8")({data:function(){return{form:{user:{}}}},methods:{getCusCart:function(){this.$store.dispatch("getCusCart")},discountedPrice:function(t){return t.coupon?t.product.price*t.qty*t.coupon.percent*.01:t.product.price*t.qty},createOrder:function(){var t=this;t.axios.post("https://vue-course-api.hexschool.io/api/zou06/order",{data:t.form}).then(function(e){e.data.success&&t.$router.push("/payment/"+e.data.orderId)})}},computed:{cusCart:function(){return this.$store.state.cusCart}},created:function(){this.getCusCart()}},xt,!1,function(t){s("MKE8")},null,null).exports,Pt={data:function(){return{cusOrderId:"",card:{creditNum:"",creditMM:"",creditYY:"",creditLN:"",creditFN:"",creditSC:""},tempCreditNum:{part1:"",part2:"",part3:"",part4:""}}},methods:{payOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/zou06/pay/"+t.cusOrderId;t.axios.post(e).then(function(e){e.data.success&&t.$router.push("/finished/"+t.cusOrderId)})},jumpToNext:function(t,e){4===t.length&&"number"==typeof parseInt(t,10)&&-1===t.indexOf(".")&&document.querySelector("#tempNumPart"+(e+1)).focus()}},watch:{tempCreditNum:{deep:!0,handler:function(){this.card.creditNum=Number(""+this.tempCreditNum.part1+this.tempCreditNum.part2+this.tempCreditNum.part3+this.tempCreditNum.part4)}}},created:function(){this.cusOrderId=this.$route.params.cusOrderId}},kt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("validation-observer",{staticClass:"py-md-4 row justify-content-center",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid,i=e.handleSubmit;return[s("form",{staticClass:"col-md-8 p-4 bg-light rounded_breakpoint",on:{submit:function(e){return e.preventDefault(),i(t.payOrder)}}},[s("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[s("h2",[s("strong",[t._v("付款資訊")])]),t._v(" "),s("div",{staticClass:"d-flex justify-content-between progress bg-primary"},[s("div",{staticClass:"progress_icon progress_chara1"}),t._v(" "),s("div",{staticClass:"progress_icon progress_chara2"}),t._v(" "),s("div",{staticClass:"progress_icon progress_icon_active"})])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{title:"必填",for:"tempNumPart1"}},[t._v("\n          信用卡號\n          "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"d-block d-sm-flex"},[s("div",{staticClass:"d-flex mb-2"},[s("validation-provider",{attrs:{rules:"digits:4|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCreditNum.part1,expression:"tempCreditNum.part1"}],staticClass:"form-control",class:i,attrs:{id:"tempNumPart1",type:"number",name:"卡號",placeholder:"1234"},domProps:{value:t.tempCreditNum.part1},on:{input:[function(e){e.target.composing||t.$set(t.tempCreditNum,"part1",e.target.value)},function(e){return t.jumpToNext(e.target.value,1)}]}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("div",{staticClass:"dashes"},[t._v("－")]),t._v(" "),s("validation-provider",{attrs:{rules:"digits:4|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCreditNum.part2,expression:"tempCreditNum.part2"}],staticClass:"form-control",class:i,attrs:{id:"tempNumPart2",type:"number",name:"卡號",placeholder:"1234"},domProps:{value:t.tempCreditNum.part2},on:{input:[function(e){e.target.composing||t.$set(t.tempCreditNum,"part2",e.target.value)},function(e){return t.jumpToNext(e.target.value,2)}]}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("div",{staticClass:"dashes d-none d-sm-inline"},[t._v("－")])],1),t._v(" "),s("div",{staticClass:"d-flex"},[s("validation-provider",{attrs:{rules:"digits:4|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCreditNum.part3,expression:"tempCreditNum.part3"}],staticClass:"form-control",class:i,attrs:{id:"tempNumPart3",type:"number",name:"卡號",placeholder:"1234"},domProps:{value:t.tempCreditNum.part3},on:{input:[function(e){e.target.composing||t.$set(t.tempCreditNum,"part3",e.target.value)},function(e){return t.jumpToNext(e.target.value,3)}]}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("div",{staticClass:"dashes"},[t._v("－")]),t._v(" "),s("validation-provider",{attrs:{rules:"numeric|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCreditNum.part4,expression:"tempCreditNum.part4"}],staticClass:"form-control",class:i,attrs:{id:"tempNumPart4",type:"number",name:"卡號",placeholder:"1234"},domProps:{value:t.tempCreditNum.part4},on:{input:function(e){e.target.composing||t.$set(t.tempCreditNum,"part4",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{title:"必填",for:"creditMM"}},[t._v("\n          有效期限\n          "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"form-row"},[s("validation-provider",{staticClass:"col",attrs:{rules:"digits:2|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.card.creditMM,expression:"card.creditMM"}],staticClass:"form-control",class:i,attrs:{id:"creditMM",type:"number",name:"月份",placeholder:"00"},domProps:{value:t.card.creditMM},on:{input:function(e){e.target.composing||t.$set(t.card,"creditMM",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"col",attrs:{rules:"digits:2|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.card.creditYY,expression:"card.creditYY"}],staticClass:"form-control",class:i,attrs:{id:"creditYY",type:"number",name:"年份",placeholder:"01"},domProps:{value:t.card.creditYY},on:{input:function(e){e.target.composing||t.$set(t.card,"creditYY",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{title:"必填",for:"creditLN"}},[t._v("\n          持卡人姓名\n          "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("div",{staticClass:"form-row"},[s("validation-provider",{staticClass:"col",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.card.creditLN,expression:"card.creditLN"}],staticClass:"form-control",class:i,attrs:{id:"creditLN",type:"text",name:"持卡人姓氏",placeholder:"劉"},domProps:{value:t.card.creditLN},on:{input:function(e){e.target.composing||t.$set(t.card,"creditLN",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("validation-provider",{staticClass:"col",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.card.creditFN,expression:"card.creditFN"}],staticClass:"form-control",class:i,attrs:{id:"creditFN",type:"text",name:"持卡人名字",placeholder:"好茶"},domProps:{value:t.card.creditFN},on:{input:function(e){e.target.composing||t.$set(t.card,"creditFN",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1)]),t._v(" "),s("validation-provider",{staticClass:"form-group mb-4",attrs:{rules:"digits:3|required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes;return[s("label",{attrs:{title:"必填",for:"creditSC"}},[t._v("\n          安全碼\n          "),s("sup",{staticClass:"text-danger"},[t._v("*")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.card.creditSC,expression:"card.creditSC"}],staticClass:"form-control",class:i,attrs:{id:"creditSC",type:"number",name:"安全碼",placeholder:"123"},domProps:{value:t.card.creditSC},on:{input:function(e){e.target.composing||t.$set(t.card,"creditSC",e.target.value)}}}),t._v(" "),s("div",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)}),t._v(" "),s("button",{staticClass:"btn btn-secondary btn-block",attrs:{type:"submit",disabled:a}},[t._v("確認付款")])],1)]}}])})],1)},staticRenderFns:[]};var wt=s("VU/8")(Pt,kt,!1,function(t){s("cxGd")},null,null).exports,$t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cuscartfinished_container"},[s("div",{staticClass:"py-md-4 row justify-content-center"},[s("div",{staticClass:"col-md-8 bg-light p-3 rounded_breakpoint"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("button",{staticClass:"btn btn-secondary d-block w-50 mx-auto mb-5",on:{click:function(e){return e.preventDefault(),t.goToCusProducts()}}},[t._v("繼續漫步茶園")]),t._v(" "),s("h3",{staticClass:"mb-3 text-center"},[t._v("已購買商品")]),t._v(" "),s("table",{staticClass:"table"},[t._m(2),t._v(" "),s("tbody",t._l(t.cusOrder.products,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.product.title))]),t._v(" "),s("td",{staticClass:"text-center"},[t._v("\n              "+t._s(e.qty)+t._s(e.product.unit))]),t._v(" "),s("td",{staticClass:"text-right"},[t._v("\n              "+t._s(t.$displayCurrency(e.final_total)))])])}),0),t._v(" "),s("tfoot",[s("tr",[t._m(3),t._v(" "),s("td",{staticClass:"text-right"},[t._v(t._s(t.$displayCurrency(t.cusOrder.total)))])])])]),t._v(" "),s("h3",{staticClass:"mb-3 text-center"},[t._v("聯絡資訊及付款狀態")]),t._v(" "),s("table",{staticClass:"table"},[s("tbody",[s("tr",[s("th",[t._v("Email")]),t._v(" "),s("td",{staticClass:"cuscartfinished_large"},[t._v(t._s(t.cusOrder.user.email))])]),t._v(" "),s("tr",[s("th",[t._v("姓名")]),t._v(" "),s("td",[t._v(t._s(t.cusOrder.user.name))])]),t._v(" "),s("tr",[s("th",[t._v("收件人電話")]),t._v(" "),s("td",[t._v(t._s(t.cusOrder.user.tel))])]),t._v(" "),s("tr",[s("th",[t._v("收件人地址")]),t._v(" "),s("td",[t._v(t._s(t.cusOrder.user.address))])]),t._v(" "),s("tr",[s("th",[t._v("付款狀態")]),t._v(" "),s("td",[t.cusOrder.is_paid?s("span",{staticClass:"text-success"},[t._v("付款完成")]):s("span",[t._v("尚未付款")])])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"text-center mb-4"},[e("strong",[this._v("訂購已完成")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex justify-content-between mx-auto progress bg-primary mb-5"},[e("div",{staticClass:"progress_icon progress_chara1"}),this._v(" "),e("div",{staticClass:"progress_icon progress_chara2"}),this._v(" "),e("div",{staticClass:"progress_icon progress_chara3"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("品名")]),this._v(" "),e("th",{staticClass:"text-center cuscartfinished_small"},[this._v("數量")]),this._v(" "),e("th",{staticClass:"text-center cuscartfinished_small"},[this._v("單價")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticClass:"text-right",attrs:{colspan:"2"}},[e("strong",[this._v("總計")])])}]};var Et=s("VU/8")({data:function(){return{cusOrderId:"",cusOrder:{user:{}}}},methods:{getCusOrder:function(){var t=this,e="https://vue-course-api.hexschool.io/api/zou06/order/"+t.cusOrderId;t.axios.get(e).then(function(e){e.data.success?t.cusOrder=e.data.order:t.$store.commit("SET_MSG",{event:"wrongServer"})})},goToCusProducts:function(){this.$router.push("/products")}},created:function(){this.cusOrderId=this.$route.params.cusOrderId,this.getCusOrder()}},$t,!1,function(t){s("HNKp")},null,null).exports;r.a.use(k.a);var St=new k.a({routes:[{path:"/index",component:J,children:[{name:"cusIndex",path:"/",component:it},{name:"cusProducts",path:"/products",component:vt},{name:"cusFavs",path:"/favs",component:st},{name:"cusProduct",path:"/products/:cusProductId",component:_t},{name:"cusCart",path:"/Cart",component:bt},{name:"cusCartInfo",path:"/info",component:yt},{name:"cusCartPayment",path:"/payment/:cusOrderId",component:wt},{name:"cusCartFinished",path:"/finished/:cusOrderId",component:Et},{name:"cusLogin",path:"/login",component:dt}]},{path:"*",redirect:"/index"},{path:"/admin",component:N,meta:{requiresAuth:!0},children:[{name:"adminProducts",path:"/",component:Y,meta:{requiresAuth:!0}},{name:"adminOrders",path:"/admin/orders",component:V,meta:{requiresAuth:!0}},{name:"adminCoupons",path:"/admin/coupons",component:D,meta:{requiresAuth:!0}}]}],scrollBehavior:function(t,e,s){return s||{x:0,y:0}}}),Tt=s("c/Tr"),Nt=s.n(Tt),At=s("lHA8"),It=s.n(At),Mt={state:{adminActive:"",adminCoupons:[],adminProducts:[],pagination:{}},actions:{getAdminCoupons:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.commit("SET_LOADING",!0);var s="https://vue-course-api.hexschool.io/api/zou06/admin/coupons?page="+e;n.a.get(s).then(function(e){e.data.coupons&&(t.commit("GET_ADMINCOUPONS",e.data.coupons),t.commit("GET_PAGINATION",e.data.pagination),t.commit("SET_LOADING",!1)),t.commit("SET_LOADING",!1)})},getAdminProducts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.commit("SET_LOADING",!0);var s="https://vue-course-api.hexschool.io/api/zou06/admin/products?page="+e;n.a.get(s).then(function(e){e.data.success?(t.commit("GET_ADMINPRODUCTS",e.data.products),t.commit("GET_PAGINATION",e.data.pagination),t.commit("SET_LOADING",!1)):t.commit("SET_LOADING",!1)})}},mutations:{SET_ADMINACTIVE:function(t,e){t.adminActive=e},GET_ADMINCOUPONS:function(t,e){t.adminCoupons=e},GET_ADMINPRODUCTS:function(t,e){t.adminProducts=e},GET_PAGINATION:function(t,e){t.pagination=e}}};r.a.use(l.a);var Ot=new l.a.Store({strict:!0,modules:{adminModule:Mt},state:{cusActive:"",cusProducts:[{favored:""}],cats:[],cusCart:{carts:[{product:{}}]},loading:!1,carting:!1,msg:{event:"",object:"",objectId:""}},actions:{getCusProducts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.commit("SET_LOADING",!0);var s="https://vue-course-api.hexschool.io/api/zou06/products?page="+e;n.a.get(s).then(function(e){if(e.data.success){var s=e.data.products.filter(function(t){return 1===t.is_enabled});t.commit("GET_CUSPRODUCTS",s),t.commit("GET_PAGINATION",e.data.pagination),t.dispatch("getCats"),t.dispatch("setCusFavs")}else t.commit("SET_LOADING",!1)})},getCats:function(t){var e=new It.a;t.state.cusProducts.forEach(function(t){e.add(t.category)}),t.commit("GET_CATS",Nt()(e))},setCusFavs:function(t){var e=JSON.parse(localStorage.getItem("cusFavs"))||[],s=t.state.cusProducts.length,a=e.length;if(a>0){for(var i=0;i<s;i++)for(var r=0;r<a;r++){if(t.state.cusProducts[i].id===e[r]){t.commit("SET_CUSFAVS",{i:i,boolean:!0});break}t.commit("SET_CUSFAVS",{i:i,boolean:!1})}t.commit("SET_LOADING",!1)}else{for(var o=0;o<s;o++)t.commit("SET_CUSFAVS",{i:o,boolean:!1});t.commit("SET_LOADING",!1)}},addToCusFavs:function(t,e){var s=JSON.parse(localStorage.getItem("cusFavs"))||[];s.push(e),localStorage.setItem("cusFavs",ot()(s)),t.state.cusProducts.find(function(s,a){return s.id===e&&t.commit("SET_CUSFAVS",{i:a,boolean:!0}),!1})},delCusFav:function(t,e){var s=JSON.parse(localStorage.getItem("cusFavs"));s.find(function(a,i){return t.state.cusProducts.find(function(r,o){return r.id===a&&e===a&&(s.splice(i,1),localStorage.setItem("cusFavs",ot()(s)),t.commit("SET_CUSFAVS",{i:o,boolean:!1})),!1}),!1})},getCusCart:function(t){t.commit("SET_CARTING",!0);n.a.get("https://vue-course-api.hexschool.io/api/zou06/cart").then(function(e){if(e.data.success){var s=e.data.data;s.carts.length>0&&s.carts.sort(function(t,e){return t.product_id<e.product_id?-1:t.product_id>e.product_id?1:0}),t.commit("GET_CUSCART",s),t.commit("SET_CARTING",!1)}else t.commit("SET_CARTING",!1)})},addToCusCart:function(t,e){var s=e.cusProduct,a=e.qty;t.commit("SET_CARTING",!0);var i="https://vue-course-api.hexschool.io/api/zou06/cart",r=t.state.cusCart.carts.length;function o(){n.a.post(i,{data:{product_id:s.id,qty:a}}).then(function(e){e.data.success&&(t.dispatch("getCusCart"),t.commit("SET_MSG",{event:"addedToCusCart",object:s.title+" "+a+" "+s.unit}),t.commit("SET_CARTING",!1))})}if(r>0){for(var c=void 0,d=0;d<r;d++)if(t.state.cusCart.carts[d].product.id===s.id){c=!0;var l=i+"/"+t.state.cusCart.carts[d].id;n.a.delete(l),n.a.post(i,{data:{product_id:s.id,qty:a+t.state.cusCart.carts[d].qty}}).then(function(e){e.data.success&&(t.dispatch("getCusCart"),t.commit("SET_MSG",{event:"addedToCusCart",object:s.title+" "+a+" "+s.unit}),t.commit("SET_CARTING",!1))});break}c||o()}else o()}},mutations:{SET_LOADING:function(t,e){t.loading=e},SET_CARTING:function(t,e){t.carting=e},SET_MSG:function(t,e){t.msg.event=e.event,t.msg.object=e.object,t.msg.objectId=e.objectId},SET_CUSACTIVE:function(t,e){t.cusActive=e},GET_CUSPRODUCTS:function(t,e){t.cusProducts=e},GET_CATS:function(t,e){t.cats=e},SET_CUSFAVS:function(t,e){r.a.set(t.cusProducts[""+e.i],"favored",e.boolean)},GET_CUSCART:function(t,e){t.cusCart=e}}});r.a.prototype.$displayDate=function(t){if(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+(e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())}return""},r.a.prototype.$displayCurrency=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"$"+Number(t).toFixed(0).replace(/./g,function(t,e,s){return e&&"."!==t&&(s.length-e)%3==0?(", "+t).replace(/\s/g,""):t})},window.$=v.a,r.a.use(d.a,n.a,l.a),r.a.component("loading",p.a),i()(h).forEach(function(t){Object(_.d)(t,h[t])}),Object(_.e)("zh_TW",C.a),r.a.component("ValidationObserver",_.a),r.a.component("ValidationProvider",_.b),Object(_.c)({classes:{invalid:"is-invalid"}}),new r.a({el:"#app",components:{App:P},template:"<App/>",router:St,store:Ot}),St.beforeEach(function(t,e,s){if(t.meta.requiresAuth){n.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?s():s({path:"/index"})})}else s()})},RPYi:function(t,e){},SYh3:function(t,e){},SjS3:function(t,e){t.exports={code:"zh_TW",messages:{alpha:"{_field_} 須以英文組成",alpha_dash:"{_field_} 須以英數、斜線及底線組成",alpha_num:"{_field_} 須以英數組成",alpha_spaces:"{_field_} 須以英文及空格組成",between:"{_field_} 須介於 {min} 至 {max}之間",confirmed:" {_field_} 不一致",digits:"{_field_} 須為 {length} 位數字",dimensions:"{_field_} 圖片尺寸不正確。須為 {width} x {height} 像素",email:"{_field_} 須為有效的電子信箱",excluded:"{_field_} 的選項無效",ext:"{_field_} 須為有效的檔案",image:"{_field_} 須為圖片",oneOf:"{_field_} 的選項無效",integer:"{_field_} 須為整數",length:"{_field_} 的長度須為 {length}",max:"{_field_} 不能大於 {length} 個字元",max_value:"{_field_} 不得大於 {max}",mimes:"{_field_} 須為有效的檔案類型",min:"{_field_} 不能小於 {length} 個字元",min_value:"{_field_} 不得小於 {min}",numeric:"{_field_} 須為數字",regex:"{_field_} 的格式錯誤",required:"{_field_} 為必填",required_if:"{_field_} 為必填",size:"{_field_} 的檔案須小於 {size}KB",double:"{_field_}字段必須為有效的小數"}}},"Smb/":function(t,e){},V9Ui:function(t,e){},"a+6V":function(t,e){},aMDT:function(t,e){},cxGd:function(t,e){},h1ik:function(t,e){},hO2C:function(t,e){},ju2U:function(t,e){},ksQV:function(t,e){},w2nM:function(t,e){},y7sW:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0ac221aa8c6ee94a24b4.js.map